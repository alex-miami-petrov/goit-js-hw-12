{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\n\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\nexport function renderImages(images) {\n  const gallery = document.getElementById('gallery');\n  gallery.innerHTML = '';\n\n  if (images.length === 0) {\n    showErrorMessage();\n    return;\n  }\n\n  const columnWidth = '360px';\n  const rowHeight = '200px';\n\n  images.forEach(image => {\n    const listItem = document.createElement('li');\n    listItem.classList.add('gallery-item');\n\n    const link = document.createElement('a');\n    link.href = image.largeImageURL;\n    link.setAttribute('data-lightbox', 'gallery');\n\n    const img = document.createElement('img');\n    img.src = image.webformatURL;\n    img.alt = image.tags;\n    link.appendChild(img);\n\n    const info = document.createElement('div');\n    info.classList.add('image-info');\n\n    const likes = document.createElement('p');\n    // likes.textContent = `Likes ${image.likes}`;\n    likes.innerHTML = `Likes <span>${image.likes}</span>`;\n\n    info.appendChild(likes);\n\n    const views = document.createElement('p');\n    // views.textContent = `Views ${image.views}`;\n    views.innerHTML = `Views <span>${image.views}</span>`;\n\n    info.appendChild(views);\n\n    const comments = document.createElement('p');\n    // comments.textContent = `Comments ${image.comments}`;\n    comments.innerHTML = `Comments <span>${image.comments}</span>`;\n\n    info.appendChild(comments);\n\n    const downloads = document.createElement('p');\n    // downloads.textContent = `Downloads ${image.downloads}`;\n    downloads.innerHTML = `Downloads <span>${image.downloads}</span>`;\n    info.appendChild(downloads);\n\n    listItem.appendChild(link);\n    listItem.appendChild(info);\n    gallery.appendChild(listItem);\n  });\n\n  lightbox.refresh();\n}\n\nfunction showErrorMessage() {\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n  });\n}\n","import iziToast from 'izitoast';\nimport axios from 'axios';\nimport { renderImages } from './js/render-functions.js';\n\nconst searchForm = document.getElementById('search-form');\nconst searchInput = document.getElementById('search-input');\nconst loader = document.getElementById('loader');\nconst gallery = document.getElementById('gallery');\nconst loadMoreBtn = document.getElementById('load-more');\n\nlet searchTerm = '';\nlet currentPage = 1;\nlet totalHits = 0;\nlet cardHeight = 0;\n\nsearchForm.addEventListener('submit', async function (event) {\n  event.preventDefault();\n\n  searchTerm = searchInput.value.trim();\n\n  if (searchTerm === '') {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search term',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  currentPage = 1;\n  gallery.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n\n  await fetchImagesAndUpdateDOM();\n});\n\nloadMoreBtn.addEventListener('click', async function () {\n  currentPage += 1;\n  await fetchImagesAndUpdateDOM();\n});\n\nasync function fetchImagesAndUpdateDOM() {\n  try {\n    loader.style.display = 'block';\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: '44685335-fea0dcf7b7c0436df223e42aa',\n        q: searchTerm,\n        image_type: 'photo',\n        page: currentPage,\n        per_page: 15,\n      },\n    });\n\n    const { hits, totalHits: newTotalHits } = response.data;\n    totalHits = newTotalHits;\n\n    if (cardHeight === 0) {\n      const firstCard = gallery.querySelector('.gallery-item');\n      if (firstCard) {\n        cardHeight = firstCard.getBoundingClientRect().height;\n      }\n    }\n\n    renderImages(hits);\n\n    if (hits.length > 0) {\n      loadMoreBtn.style.display = 'block';\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    } else {\n      showErrorMessage();\n    }\n\n    if (totalHits <= currentPage * 15) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    console.error('Error searching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: 'Failed to search images. Please try again later.',\n      position: 'topRight',\n    });\n  } finally {\n    loader.style.display = 'none';\n    searchInput.value = '';\n  }\n}\n\nfunction showErrorMessage() {\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n  });\n}\n"],"names":["lightbox","SimpleLightbox","renderImages","images","gallery","showErrorMessage","image","listItem","link","img","info","likes","views","comments","downloads","iziToast","searchForm","searchInput","loader","loadMoreBtn","searchTerm","currentPage","totalHits","cardHeight","event","fetchImagesAndUpdateDOM","response","axios","hits","newTotalHits","firstCard","error"],"mappings":"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"}